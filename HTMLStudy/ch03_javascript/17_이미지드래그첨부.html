<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>이미지드래그첨부</title>

    <style>
        .profile-img {
            position: relative;
            width: 200px;
            height: 200px;
            border-radius: 100px;

            display: flex;
            justify-content: center;
            align-items: center;

            overflow: hidden;
        }

        .img {
            width: 100%;
        }

        .info {
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: rgb(255, 105, 180, 0.7);
            color: white;

            display: flex;
            justify-content: center;
            align-items: center;

            font-size: 20px;
            font-weight: bold;

            /* 이벤트 대상에서 제외시킴 */
            pointer-events: none;
        }

        .d-none {
            opacity: 0;
        }
    </style>
</head>

<body>
    <div class="profile-img">
        <img id="profImg" class="img"
            src="https://img1.daumcdn.net/thumb/R1280x0/?fname=http://t1.daumcdn.net/brunch/service/user/7r5X/image/9djEiPBPMLu_IvCYyvRPwmZkM1g.jpg"
            alt="">
        <div class="info d-none">drop image</div>
    </div>
    <input id="inputImg" type="file" accept="image/*" onchange="readImg()">

    <script>
        let v_divImg = document.querySelector(".profile-img")
        let v_inputImg = document.getElementById("inputImg")

        v_divImg.addEventListener("dragover", () => {
            document.querySelector(".info").classList.remove("d-none")
        })

        v_divImg.addEventListener("dragleave", () => {
            document.querySelector(".info").classList.add("d-none")
        })

        window.addEventListener("drop", () => event.preventDefault()) // 기본적으로 적용되어있는 event 무효
        window.addEventListener("dragover", () => event.preventDefault())

        v_divImg.addEventListener("drop", () => {
            document.querySelector(".info").classList.add("d-none")
            v_inputImg.files = event.dataTransfer.files

            let v_file = v_inputImg.files[0]
            let v_fr = new FileReader()
            v_fr.readAsDataURL(v_file)
            v_fr.onload = () => {
                document.getElementById("profImg").src = v_fr.result
            }
        })

        function readImg() {
            let v_file = event.target.files[0]
            let v_fr = new FileReader()
            v_fr.readAsDataURL(v_file)
            v_fr.onload = () => {
                document.getElementById("profImg").src = v_fr.result
            }
        }
    </script>
</body>

</html>